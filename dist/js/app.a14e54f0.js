(function(){"use strict";var e={1695:function(e,t,o){var n=o(9242),s=o(3396);function r(e,t,o,n,r,i){const a=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(a)}var i=(0,s.aZ)({name:"App"}),a=o(89);const l=(0,a.Z)(i,[["render",r]]);var d=l,c=o(2483),u=o(7139),p=o.p+"img/filter-icon.cee5d3dd.svg";const g=e=>((0,s.dD)("data-v-34ea92db"),e=e(),(0,s.Cn)(),e),m={class:"p-2 mobile:p-5"},h={class:"max-w-1xl m-auto"},f={class:"px-8 py-5 border border-[#bdbdbd]"},b={class:"flex items-center justify-between flex-wrap gap-3 rounded bg-indigo-700 p-3 mb-5"},v={class:"text-lg mobile:text-2xl text-white font-bold"},w={class:"w-full mobile:w-auto"},y=g((()=>(0,s._)("div",{class:"flex justify-between mb-5"},[(0,s._)("div",null,[(0,s._)("h3",{class:"mb-1 text-xl"},"Список задач"),(0,s._)("p",{class:"text-gray-600"},"Успевай больше и ничего не забывай")])],-1))),_={class:"basis-[90%] mb-4 mobile:mb-0"},x=g((()=>(0,s._)("div",{class:"basis-[10%]"},[(0,s._)("input",{type:"submit",value:"Добавить",class:"w-full rounded-lg bg-indigo-700 hover:bg-indigo-600 cursor-pointer text-white py-2 px-4 text-sm"})],-1))),S={class:"px-8 py-6 bg-gray-100"},O={class:"flex flex-wrap justify-between items-end mt-4 bg-[#3f51b517] p-4 rounded"},T=g((()=>(0,s._)("div",{class:"flex items-center"},[(0,s._)("img",{class:"mr-2",width:"22",height:"22",src:p}),(0,s._)("h3",{class:"text-lg"},"Фильтры")],-1))),I={class:"mt-2"},k={for:"all",class:"flex items-center cursor-pointer mb-1"},C=g((()=>(0,s._)("span",{class:"text-sm"},"Все",-1))),D={for:"todays",class:"flex items-center cursor-pointer"},Z=g((()=>(0,s._)("span",{class:"text-sm"},"Сегодняшние",-1))),P=["disabled"],j={class:"mt-4 md:mt-0"},A=g((()=>(0,s._)("div",{class:"my-5"},[(0,s._)("p",{class:"text-gray-600"},"Текущие задачи")],-1))),N={class:"grid gap-4 grid-cols-1 grid-rows-2 md:grid-cols-2"},U=["for"],E={class:"mr-2 bg-red-500"},L=["id","onChange","checked"],H={class:"w-[90%]"},R={class:"todo-title"},V=["onClick"],Y=g((()=>(0,s._)("p",{class:"text-red-500 text-sm font-semibold"},"Удалить",-1))),F=[Y];function J(e,t,o,r,i,a){return(0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",h,[(0,s._)("div",f,[(0,s._)("div",b,[(0,s._)("div",null,[(0,s._)("h2",v,(0,u.zw)(e.user.username)+" 🧑 ",1)]),(0,s._)("div",w,[(0,s._)("button",{onClick:t[0]||(t[0]=(...t)=>e.handleSignOut&&e.handleSignOut(...t)),class:"w-full bg-transparent text-white text-sm py-2 px-4 border border-white rounded"}," Выйти из аккаунта ")])]),y,(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...t)=>e.addTodo&&e.addTodo(...t)),["prevent"])),class:"block mobile:flex items-center gap-4 flex-wrap mobile:flex-nowrap"},[(0,s._)("div",_,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.newTodoTitle=t),placeholder:"Новая задача...",class:"w-full rounded-lg text-sm border border-gray-400 focus:ring-0",maxlength:"70",required:""},null,512),[[n.nr,e.newTodoTitle]])]),x],32)]),(0,s._)("div",S,[(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.searchTerm=t),placeholder:"Поиск...",class:"w-full rounded-lg text-sm border border-gray-400 focus:ring-0"},null,512),[[n.nr,e.searchTerm]])]),(0,s._)("div",O,[(0,s._)("div",null,[T,(0,s._)("div",I,[(0,s._)("label",k,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedOption=t),type:"radio",id:"all",name:"all",value:"Все",class:"mr-2 cursor-pointer"},null,512),[[n.G2,e.selectedOption]]),C]),(0,s._)("label",D,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedOption=t),type:"radio",id:"todays",name:"todays",value:"Сегодняшние",class:"mr-2 cursor-pointer"},null,512),[[n.G2,e.selectedOption]]),Z]),(0,s._)("button",{disabled:0===e.selectedOption.length,onClick:t[6]||(t[6]=(...t)=>e.unCheck&&e.unCheck(...t)),class:"bg-indigo-600 hover:bg-indigo-700 text-white mt-3 text-sm font-bold py-2 px-4 border border-indigo-700 rounded"}," Сбросить фильтры ",8,P)])]),(0,s._)("div",j,[(0,s._)("button",{onClick:t[7]||(t[7]=(...t)=>e.createTomorrowTodo&&e.createTomorrowTodo(...t)),title:"Данная кнопка добовляет статистическую заметку со вчерашневой датой для проверки роботоспособности фильтра",class:"bg-red-500 hover:bg-red-400 text-white text-sm font-bold py-2 px-4 border-b-4 border-red-700 hover:border-red-500 rounded"}," Добавить заметку со вчерашневой датой ")])]),A,(0,s._)("div",N,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.filteredTodos,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:(0,u.C_)([{"line-through":t.completed},"flex items-center justify-between p-3 select-none rounded cursor-pointer border border-gray-400"])},[(0,s._)("label",{for:t.id.toString(),class:"flex w-[90%] items-center cursor-pointer"},[(0,s._)("div",E,[(0,s._)("input",{type:"checkbox",id:t.id.toString(),onChange:o=>e.toggleCompleted(t.id),checked:t.completed,class:"flex cursor-pointer focus:ring-0"},null,40,L)]),(0,s._)("div",H,[(0,s._)("span",R,(0,u.zw)(t.title),1)])],8,U),(0,s._)("div",{onClick:o=>e.removeTodo(t.id)},F,8,V)],2)))),128))])])])])}o(7658);var M=o(4870),z=o(4161),G=o(1609),B=o(1020);const q=(0,B.Q_)({id:"user",state:()=>({username:"",isSignedIn:!1}),actions:{setUsername(e){this.username=e}},getters:{formattedUsername(){return`@${this.username}`}},persist:{enabled:!0,strategies:[{storage:localStorage,paths:["username","isSignedIn"]}]}});var Q=o(3029);const W=(0,B.Q_)({id:"todo",state:()=>({todos:[],searchTerm:""}),actions:{add(e){const t={id:(0,Q.Z)(),title:e,completed:!1,createdAt:new Date};z.Z.post("http://localhost:4000/todos",t).then((e=>{this.todos.push(e.data)}))},filterTodayTodos(){const e=new Date,t=this.todos.filter((t=>{const o=new Date(t.createdAt);return o.getDate()===e.getDate()&&o.getMonth()===e.getMonth()&&o.getFullYear()===e.getFullYear()}));this.todos=t},async toggleCompleted(e){await z.Z.patch(`http://localhost:4000/todos/${e}`,{completed:!0}).then((()=>{const t=this.todos.find((t=>t.id===e));t&&(t.completed=!t.completed)})).catch((e=>{console.error(e)}))},filterTomorrowObjects(){const e=new Date,t=new Date(e);t.setDate(e.getDate()-1);const o={id:(0,Q.Z)(),title:"Static todo",completed:!1,createdAt:t};z.Z.post("http://localhost:4000/todos",o).then((e=>{this.todos.push(e.data)}))},async remove(e){try{await z.Z["delete"](`http://localhost:4000/todos/${e}`).then((()=>{this.todos=this.todos.filter((t=>t.id!==e))}))}catch(t){console.log(t)}},setSearchTerm(e){this.searchTerm=e}},getters:{filteredTodos(){return this.todos.filter((e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())))}}});var $=(0,s.aZ)({name:"HomePage",setup(){const e=(0,G.v0)(),t=q(),o=(0,c.tv)(),n=W(),r=(0,M.iH)(""),i=(0,M.iH)(""),a=["Все","Сегодняшние"],l=(0,M.iH)("");(0,s.bv)((async()=>{const e=sessionStorage.getItem("filteredProducts"),t=sessionStorage.getItem("selectedOption");if(e&&"Все"!==t){n.todos.splice(0,n.todos.length);for(const t in JSON.parse(e))n.todos.push(JSON.parse(e)[t])}else g()})),(0,s.YP)(l,(e=>{switch(sessionStorage.setItem("selectedOption",l.value),e){case"Все":g();break;case"Сегодняшние":n.filterTodayTodos();break;default:g();break}}));const d=()=>{""!==r.value.trim()&&(n.add(r.value),r.value="")},u=()=>l.value="",p=e=>n.toggleCompleted(e),g=async()=>{try{const e=await z.Z.get("http://localhost:4000/todos");n.todos=e.data}catch(e){console.error(e)}},m=e=>n.remove(e),h=()=>{n.filterTomorrowObjects(),l.value=""};function f(){(0,G.w7)(e).then((()=>{sessionStorage.removeItem("user"),o.push("/login")})).catch((e=>{console.log(e)}))}const b=(0,s.Fl)((()=>n.todos.filter((e=>e.title.toLowerCase().includes(i.value.toLowerCase())))));return(0,s.YP)(i,(async()=>{sessionStorage.setItem("filteredProducts",JSON.stringify({...b.value}));const e=sessionStorage.getItem("filteredProducts");if(e){n.todos.splice(0,n.todos.length);for(const t in JSON.parse(e))n.todos.push(JSON.parse(e)[t])}})),{user:t,options:a,searchTerm:i,newTodoTitle:r,filteredTodos:b,selectedOption:l,unCheck:u,addTodo:d,removeTodo:m,getAllTodos:g,handleSignOut:f,toggleCompleted:p,createTomorrowTodo:h}}});const K=(0,a.Z)($,[["render",J],["__scopeId","data-v-34ea92db"]]);var X=K;const ee=e=>((0,s.dD)("data-v-7df3ded2"),e=e(),(0,s.Cn)(),e),te={class:"relative h-screen bg-slate-50"},oe={class:"absolute max-w-full top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},ne=ee((()=>(0,s._)("div",{id:"firebaseui-auth-container"},null,-1))),se=ee((()=>(0,s._)("div",{id:"loader"},"Loading...",-1))),re=ee((()=>(0,s._)("br",null,null,-1))),ie={key:0};function ae(e,t,o,n,r,i){return(0,s.wg)(),(0,s.iD)("div",te,[(0,s._)("div",oe,[ne,se,re,n.user.isSignedIn?((0,s.wg)(),(0,s.iD)("div",ie,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>n.handleSignOut&&n.handleSignOut(...e))},"Sign Out")])):(0,s.kq)("",!0)])])}var le={apiKey:"AIzaSyBbCEgocpnYzZcr12jSqtLWf6N6PYy6vCg",authDomain:"vue3-todo-2ed43.firebaseapp.com",projectId:"vue3-todo-2ed43",storageBucket:"vue3-todo-2ed43.appspot.com",messagingSenderId:"59572246311",appId:"1:59572246311:web:02a375b48850714b22fb02",measurementId:"G-FZTZL4DHQS"},de=o(1509),ce=o(6866);de.Z.initializeApp(le);const ue=(0,G.v0)();var pe={setup(){const e=(0,c.tv)(),t=q(),o={signInFlow:"popup",signinSuccessUrl:"http://localhost:8080/",signInOptions:[de.Z.auth.GoogleAuthProvider.PROVIDER_ID,de.Z.auth.TwitterAuthProvider.PROVIDER_ID,de.Z.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(o){return t.value=o.user.displayName,t.setUsername(o.user.displayName),t.isSignedIn=!0,e.push("/"),!1},uiShown:function(){document.getElementById("loader").style.display="none"}}};try{var n=new ce.I.AuthUI(de.Z.auth());n.start("#firebaseui-auth-container",o)}catch{window.location.reload()}const s=()=>{(0,G.w7)(ue).then((()=>{t.value=null,t.isSignedIn=!1,console.log("Signed out"),n.start("#firebaseui-auth-container",o)})).catch((e=>{console.log(e)}))};return{user:t,handleSignOut:s}}};const ge=(0,a.Z)(pe,[["render",ae],["__scopeId","data-v-7df3ded2"]]);var me=ge;const he=[{path:"/login",name:"Login",component:me,meta:{isAuth:!1}},{path:"/",name:"Home",component:X,meta:{isAuth:!0}}],fe=(0,c.p7)({history:(0,c.PO)(),routes:he});function be(){const e=localStorage.getItem("user");if(null!==e){const{isSignedIn:t}=JSON.parse(e);return t}return!1}fe.beforeEach(((e,t,o)=>{const n=e.matched.some((e=>e.meta.isAuth));n&&!be()?o("/login"):o()}));var ve=fe,we=o(3282);const ye=(0,B.WB)();ye.use(we.Z),(0,n.ri)(d).use(ve).use(ye).mount("#app")}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){o.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];o.O=function(t,n,s,r){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],s=e[c][1],r=e[c][2];for(var a=!0,l=0;l<n.length;l++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(a=!1,r<i&&(i=r));if(a){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,s,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,i=n[0],a=n[1],l=n[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var c=l(o)}for(t&&t(n);d<i.length;d++)r=i[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},n=self["webpackChunkvue3_todo"]=self["webpackChunkvue3_todo"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(1695)}));n=o.O(n)})();
//# sourceMappingURL=app.a14e54f0.js.map